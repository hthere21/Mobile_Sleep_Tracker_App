{"ast":null,"code":"var https = require(\"https\");\n\nvar http = require(\"http\");\n\nvar extend = require(\"./extend\");\n\nvar HttpsProxyAgent = require(\"https-proxy-agent\");\n\nvar userAgent = getUA();\n\nfunction getUA() {\n  var os = require(\"os\");\n\n  var version = require(\"../package.json\").version;\n\n  return os.platform() + \"/\" + os.release() + \" \" + \"node/\" + process.versions.node + \" \" + \"node-browserstack/\" + version;\n}\n\nvar BaseClient = function (settings) {\n  if (!settings.username) {\n    throw new Error(\"Username is required.\");\n  }\n\n  if (!settings.password) {\n    throw new Error(\"Password is required.\");\n  }\n\n  extend(this, settings);\n  this.authHeader = \"Basic \" + Buffer.from(this.username + \":\" + this.password).toString(\"base64\");\n};\n\nBaseClient.prototype.request = function (options, data, fn) {\n  if (typeof data === \"function\") {\n    fn = data;\n    data = null;\n  }\n\n  fn = fn || function () {};\n\n  var reqOptions = extend({\n    host: this.server.host,\n    port: this.server.port,\n    method: \"GET\",\n    headers: {\n      authorization: this.authHeader,\n      \"content-type\": \"application/json\",\n      \"user-agent\": userAgent,\n      \"content-length\": typeof data === \"string\" ? data.length : 0\n    },\n    agent: this.proxy ? new HttpsProxyAgent(this.proxy) : null\n  }, options);\n  var req = (this.useHttp ? http : https).request(reqOptions, function (res) {\n    var response = \"\";\n    res.setEncoding(\"utf8\");\n    res.on(\"data\", function (chunk) {\n      response += chunk;\n    });\n    res.on(\"end\", function () {\n      if (res.statusCode !== 200) {\n        var message;\n\n        if (res.headers[\"content-type\"].indexOf(\"json\") !== -1) {\n          response = JSON.parse(response);\n          message = response.message;\n\n          if (response.errors) {\n            if (Array.isArray(response.errors) && response.errors.length) {\n              message += \" - \" + response.errors.map(function (error) {\n                return \"`\" + error.field + \"` \" + error.code;\n              }).join(\", \");\n            } else {\n              message += \" - \" + response.errors.toString();\n            }\n          }\n        } else {\n          message = response;\n        }\n\n        if (!message && res.statusCode === 403) {\n          message = \"Forbidden\";\n        }\n\n        fn(new Error(message));\n      } else {\n        fn(null, JSON.parse(response));\n      }\n    });\n  });\n  req.on(\"error\", fn);\n\n  if (data) {\n    req.write(data);\n  }\n\n  req.end();\n};\n\nmodule.exports = BaseClient;","map":{"version":3,"names":["https","require","http","extend","HttpsProxyAgent","userAgent","getUA","os","version","platform","release","process","versions","node","BaseClient","settings","username","Error","password","authHeader","Buffer","from","toString","prototype","request","options","data","fn","reqOptions","host","server","port","method","headers","authorization","length","agent","proxy","req","useHttp","res","response","setEncoding","on","chunk","statusCode","message","indexOf","JSON","parse","errors","Array","isArray","map","error","field","code","join","write","end","module","exports"],"sources":["/Users/hthere215/Desktop/Study/Classes/INF4MTX 133/Project/Project 4/a4-sleeptracker-hthere21/sleeptracker/node_modules/browserstack/lib/client.js"],"sourcesContent":["var https = require(\"https\");\nvar http = require(\"http\");\nvar extend = require(\"./extend\");\nvar HttpsProxyAgent = require(\"https-proxy-agent\");\nvar userAgent = getUA();\n\nfunction getUA() {\n\tvar os = require(\"os\");\n\tvar version = require(\"../package.json\").version;\n\n\treturn os.platform() + \"/\" + os.release() + \" \" +\n\t\t\"node/\" + process.versions.node + \" \" +\n\t\t\"node-browserstack/\" + version;\n}\n\nvar BaseClient = function(settings) {\n\tif (!settings.username) {\n\t\tthrow new Error(\"Username is required.\");\n\t}\n\tif (!settings.password) {\n\t\tthrow new Error(\"Password is required.\");\n\t}\n\n\textend(this, settings);\n\n\tthis.authHeader = \"Basic \" +\n\t\tBuffer.from(this.username + \":\" + this.password).toString(\"base64\");\n};\n\nBaseClient.prototype.request = function(options, data, fn) {\n\tif (typeof data === \"function\") {\n\t\tfn = data;\n\t\tdata = null;\n\t}\n\n\tfn = fn || function() {};\n\n\tvar reqOptions = extend({\n\t\thost: this.server.host,\n\t\tport: this.server.port,\n\t\tmethod: \"GET\",\n\t\theaders: {\n\t\t\tauthorization: this.authHeader,\n\t\t\t\"content-type\": \"application/json\",\n\t\t\t\"user-agent\": userAgent,\n\t\t\t\"content-length\": typeof data === \"string\" ? data.length : 0\n\t\t},\n\t\tagent: (this.proxy) ? new HttpsProxyAgent(this.proxy) : null\n\t}, options);\n\n\tvar req = (this.useHttp ? http : https).request(reqOptions, function(res) {\n\t\tvar response = \"\";\n\t\tres.setEncoding(\"utf8\");\n\t\tres.on(\"data\", function(chunk) {\n\t\t\tresponse += chunk;\n\t\t});\n\t\tres.on(\"end\", function() {\n\t\t\tif (res.statusCode !== 200) {\n\t\t\t\tvar message;\n\t\t\t\tif (res.headers[\"content-type\"].indexOf(\"json\") !== -1) {\n\t\t\t\t\tresponse = JSON.parse(response);\n\t\t\t\t\tmessage = response.message;\n\t\t\t\t\tif (response.errors) {\n\t\t\t\t\t\tif (Array.isArray(response.errors) && response.errors.length) {\n\t\t\t\t\t\t\tmessage += \" - \" + response.errors.map(function(error) {\n\t\t\t\t\t\t\t\treturn \"`\" + error.field + \"` \" + error.code;\n\t\t\t\t\t\t\t}).join(\", \");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tmessage += \" - \" + response.errors.toString();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tmessage = response;\n\t\t\t\t}\n\t\t\t\tif (!message && res.statusCode === 403) {\n\t\t\t\t\tmessage = \"Forbidden\";\n\t\t\t\t}\n\t\t\t\tfn(new Error(message));\n\t\t\t} else {\n\t\t\t\tfn(null, JSON.parse(response));\n\t\t\t}\n\t\t});\n\t});\n\n\treq.on(\"error\", fn);\n\n\tif (data) {\n\t\treq.write(data);\n\t}\n\n\treq.end();\n};\n\nmodule.exports = BaseClient;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}