{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst child_process_1 = require(\"child_process\");\n\nconst q = require(\"q\");\n\nconst logger_1 = require(\"./logger\");\n\nconst BP_PATH = require.resolve('blocking-proxy/built/lib/bin.js');\n\nlet logger = new logger_1.Logger('BlockingProxy');\n\nclass BlockingProxyRunner {\n  constructor(config) {\n    this.config = config;\n  }\n\n  start() {\n    return q.Promise((resolve, reject) => {\n      this.checkSupportedConfig();\n      let args = ['--fork', '--seleniumAddress', this.config.seleniumAddress];\n\n      if (this.config.webDriverLogDir) {\n        args.push('--logDir', this.config.webDriverLogDir);\n      }\n\n      if (this.config.highlightDelay) {\n        args.push('--highlightDelay', this.config.highlightDelay.toString());\n      }\n\n      this.bpProcess = child_process_1.fork(BP_PATH, args, {\n        silent: true\n      });\n      logger.info('Starting BlockingProxy with args: ' + args.toString());\n      this.bpProcess.on('message', data => {\n        this.port = data['port'];\n        resolve(data['port']);\n      }).on('error', err => {\n        reject(new Error('Unable to start BlockingProxy ' + err));\n      }).on('exit', (code, signal) => {\n        reject(new Error('BP exited with ' + code));\n        logger.error('Exited with ' + code);\n        logger.error('signal ' + signal);\n      });\n      this.bpProcess.stdout.on('data', msg => {\n        logger.debug(msg.toString().trim());\n      });\n      this.bpProcess.stderr.on('data', msg => {\n        logger.error(msg.toString().trim());\n      });\n      process.on('exit', () => {\n        this.bpProcess.kill();\n      });\n    });\n  }\n\n  checkSupportedConfig() {\n    if (this.config.directConnect) {\n      throw new Error('BlockingProxy not yet supported with directConnect!');\n    }\n  }\n\n}\n\nexports.BlockingProxyRunner = BlockingProxyRunner;","map":{"version":3,"names":["Object","defineProperty","exports","value","child_process_1","require","q","logger_1","BP_PATH","resolve","logger","Logger","BlockingProxyRunner","constructor","config","start","Promise","reject","checkSupportedConfig","args","seleniumAddress","webDriverLogDir","push","highlightDelay","toString","bpProcess","fork","silent","info","on","data","port","err","Error","code","signal","error","stdout","msg","debug","trim","stderr","process","kill","directConnect"],"sources":["/Users/hthere215/Desktop/Study/Classes/INF4MTX 133/Project/Project 4/a4-sleeptracker-hthere21/sleeptracker/node_modules/protractor/built/bpRunner.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst child_process_1 = require(\"child_process\");\nconst q = require(\"q\");\nconst logger_1 = require(\"./logger\");\nconst BP_PATH = require.resolve('blocking-proxy/built/lib/bin.js');\nlet logger = new logger_1.Logger('BlockingProxy');\nclass BlockingProxyRunner {\n    constructor(config) {\n        this.config = config;\n    }\n    start() {\n        return q.Promise((resolve, reject) => {\n            this.checkSupportedConfig();\n            let args = [\n                '--fork',\n                '--seleniumAddress',\n                this.config.seleniumAddress,\n            ];\n            if (this.config.webDriverLogDir) {\n                args.push('--logDir', this.config.webDriverLogDir);\n            }\n            if (this.config.highlightDelay) {\n                args.push('--highlightDelay', this.config.highlightDelay.toString());\n            }\n            this.bpProcess = child_process_1.fork(BP_PATH, args, { silent: true });\n            logger.info('Starting BlockingProxy with args: ' + args.toString());\n            this.bpProcess\n                .on('message', (data) => {\n                this.port = data['port'];\n                resolve(data['port']);\n            })\n                .on('error', (err) => {\n                reject(new Error('Unable to start BlockingProxy ' + err));\n            })\n                .on('exit', (code, signal) => {\n                reject(new Error('BP exited with ' + code));\n                logger.error('Exited with ' + code);\n                logger.error('signal ' + signal);\n            });\n            this.bpProcess.stdout.on('data', (msg) => {\n                logger.debug(msg.toString().trim());\n            });\n            this.bpProcess.stderr.on('data', (msg) => {\n                logger.error(msg.toString().trim());\n            });\n            process.on('exit', () => {\n                this.bpProcess.kill();\n            });\n        });\n    }\n    checkSupportedConfig() {\n        if (this.config.directConnect) {\n            throw new Error('BlockingProxy not yet supported with directConnect!');\n        }\n    }\n}\nexports.BlockingProxyRunner = BlockingProxyRunner;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}